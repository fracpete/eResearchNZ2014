# Project: adams
# Date: 2014-06-29 21:34:27
# User: fracpete
#
adams.flow.control.Flow
	-actor
		adams.flow.standalone.SetVariable
			-var-name
			model
			-var-value
			${TMP}/101.model
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			determine # of classes
			-tee
				adams.flow.source.Variable
					-var-name
					model
			-tee
				adams.flow.transformer.WekaModelReader
			-tee
				adams.flow.control.ContainerValuePicker
					-value
					Header
					-switch-outputs
					true
			-tee
				adams.flow.control.Tee
					-tee
						adams.flow.transformer.WekaInstancesInfo
							-type
							NUM_CLASS_LABELS
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							num_labels
			-tee
				adams.flow.transformer.WekaInstancesInfo
					-type
					CLASS_LABELS
			-tee
				adams.flow.transformer.SequenceToArray
					-length
					@{num_labels}
			-tee
				adams.flow.transformer.StringJoin
					-glue
					,
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					labels
	-actor
		adams.flow.control.Trigger
			-name
			make predictions
			-tee
				adams.flow.source.SelectFile
					-stop-if-canceled
					true
					-file-chooser-title
					Select images to classify
					-extension
					jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0011.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0030.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0044.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0061.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0081.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0115.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0150.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0185.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0220.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0251.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0286.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0324.jpg
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes.test/airplanes/image_0356.jpg
			-tee
				adams.flow.transformer.JAIReader
			-tee
				adams.flow.transformer.JAIFlattener
					-flattener
						adams.data.jai.flattener.Histogram
			-tee
				adams.flow.control.UpdateProperties
					-property
					filter.nominalLabels
					-variable
					labels
					-sub-actor
						adams.flow.transformer.WekaFilter
							-filter
								weka.filters.unsupervised.attribute.Add
									-T
									NOM
									-N
									category
									-L
									Faces,airplanes
									-C
									last
			-tee
				adams.flow.transformer.WekaClassSelector
			-tee
				adams.flow.transformer.WekaClassifying
					-model
					@{model}
			-tee
				adams.flow.control.ContainerValuePicker
					-value
					Classification label
					-switch-outputs
					true
			-tee
				adams.flow.sink.Display
					-writer
						adams.data.io.output.NullWriter
	-flow-execution-listener
		adams.flow.execution.NullListener

