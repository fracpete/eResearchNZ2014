# Project: adams
# Date: 2014-06-28 19:18:34
# User: fracpete
#
adams.flow.control.Flow
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.source.SequenceSource
					-name
					train
					-actor
						adams.flow.source.Variable
							-var-name
							dataset
					-actor
						adams.flow.transformer.WekaFileReader
							-loader
								weka.core.converters.ArffLoader
					-actor
						adams.flow.transformer.WekaFilter
							-filter
								weka.filters.unsupervised.attribute.StringToNominal
									-R
									last
					-actor
						adams.flow.transformer.WekaClassSelector
			-actor
				adams.flow.source.WekaClassifierSetup
					-classifier
					@{classifier}
			-actor
				adams.flow.sink.HistoryDisplay
					-width
					900
					-entry-name-variable
					classifier
	-actor
		adams.flow.standalone.SetVariable
			-var-name
			setups
			-var-value
			${TMP}/classifier_setups.txt
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			select dataset
			-tee
				adams.flow.source.SelectFile
					-stop-if-canceled
					true
					-file-chooser-title
					Select training set
					-extension
					arff
					-initial-file
					${HOME}/documents/conferences/eResearchNZ2014/workshop/data/101_ObjectCategories-2classes/train.arff
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					dataset
	-actor
		adams.flow.control.Trigger
			-name
			remove setups
			-tee
				adams.flow.source.Variable
					-var-name
					setups
			-tee
				adams.flow.transformer.DeleteFile
	-actor
		adams.flow.control.Trigger
			-name
			generate J48
			-tee
				adams.flow.source.WekaClassifierGenerator
					-setup
						weka.classifiers.trees.J48
							-C
							0.25
							-M
							2
					-parameter
						weka.core.setupgenerator.MathParameter
							-property
							confidenceFactor
							-min
							0.2
							-max
							0.5
							-step
							0.05
							-base
							10.0
							-expression
							I
					-parameter
						weka.core.setupgenerator.MathParameter
							-property
							minNumObj
							-min
							1.0
							-max
							31.0
							-step
							10.0
							-base
							10.0
							-expression
							I
			-tee
				adams.flow.transformer.Convert
					-conversion
						adams.data.conversion.AnyToCommandline
			-tee
				adams.flow.sink.DumpFile
					-output
					@{setups}
					-append
					true
	-actor
		adams.flow.control.Trigger
			-name
			generate RandomForest
			-tee
				adams.flow.source.WekaClassifierGenerator
					-setup
						weka.classifiers.trees.RandomForest
							-I
							10
							-K
							0
							-S
							1
							-num-slots
							1
					-parameter
						weka.core.setupgenerator.MathParameter
							-property
							numTrees
							-min
							10.0
							-max
							110.0
							-step
							20.0
							-base
							10.0
							-expression
							I
			-tee
				adams.flow.transformer.Convert
					-conversion
						adams.data.conversion.AnyToCommandline
			-tee
				adams.flow.sink.DumpFile
					-output
					@{setups}
					-append
					true
	-actor
		adams.flow.control.Trigger
			-name
			test setups
			-tee
				adams.flow.source.Variable
					-var-name
					setups
			-tee
				adams.flow.transformer.TextFileReader
					-reader
						adams.data.io.input.LineArrayTextReader
			-tee
				adams.flow.control.ArrayProcess
					-actor
						adams.flow.transformer.Convert
							-conversion
								adams.data.conversion.CommandlineToAny
					-array-class
					weka.classifiers.Classifier
			-tee
				adams.flow.transformer.WekaClassifierRanker
					-folds
					2
					-measure
					ACC
			-tee
				adams.flow.transformer.ArrayToSequence
			-tee
				adams.flow.transformer.Convert
					-conversion
						adams.data.conversion.AnyToCommandline
			-tee
				adams.flow.transformer.SetVariable
					-var-name
					classifier
			-tee
				adams.flow.control.Trigger
					-name
					evaluate
					-tee
						adams.flow.source.CallableSource
							-callable
							train
					-tee
						adams.flow.transformer.WekaCrossValidationEvaluator
							-output
								weka.classifiers.evaluation.output.prediction.Null
							-num-threads
							-1
					-tee
						adams.flow.transformer.WekaEvaluationSummary
							-confusion-matrix
							true
							-class-details
							true
					-tee
						adams.flow.sink.CallableSink
							-callable
							HistoryDisplay
	-flow-execution-listener
		adams.flow.execution.NullListener

